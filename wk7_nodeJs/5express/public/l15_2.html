<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>l15-2 photo upload ajax</title>
</head>
<body>
    <input type="file" multiple>
<script>
    const input = document.querySelector("input");
    input.addEventListener("change", function(ev){
        let formdata = new FormData();
        for(let file of ev.target.files){
            formdata.append("multiFiles", file);
        }
        console.log(formdata);
        uploadFile(formdata);
    });

    function uploadFile(fd) {
        const xhr = new XMLHttpRequest();
        xhr.open("POST", "/l14/multi");
        xhr.onreadystatechange = function(){
            if(xhr.status===200 && xhr.readyState===4){
                console.log(xhr.response);
            }
        };
        xhr.send(fd);
    }


</script>
</body>
</html>