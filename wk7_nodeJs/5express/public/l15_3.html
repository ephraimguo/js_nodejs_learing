<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<input type="file">

<div class="content">

</div>



<script>
    const input = document.querySelector("input");
    input.onchange = function(event){
        const formdata = new FormData();
        const file = event.target.files[0];
        formdata.append("singleFile", file);

        upload(formdata);
    };


    function upload(formdata){
        const xhr = new XMLHttpRequest();
        xhr.open("POST", "/l14/xhr");
        xhr.responseType = "json";
        xhr.onreadystatechange = function(){
            if(xhr.status===200 && xhr.readyState===4){
                // console.log(xhr.response);
                console.log(typeof xhr.response);
                let imgUrl = "/l14/img"+xhr.response.filename;
                addImage(imgUrl);
            }
        };
        xhr.send(formdata);
    }


    function addImage(url){
        let img = new Image();
        img.src = url;
        img.height = 100;
        img.width = 100;
        let div = document.querySelector(".content");
        div.appendChild(img);
    }


</script>
</body>
</html>